(function(t){function e(e){for(var i,o,r=e[0],s=e[1],u=e[2],d=0,f=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&f.push(a[o][0]),a[o]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i]);l&&l(e);while(f.length)f.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var t,e=0;e<c.length;e++){for(var n=c[e],i=!0,r=1;r<n.length;r++){var s=n[r];0!==a[s]&&(i=!1)}i&&(c.splice(e--,1),t=o(o.s=n[0]))}return t}var i={},a={app:0},c=[];function o(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=i,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/Drib-money-pro-website/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],s=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var l=s;c.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"0140":function(t,e,n){},"0c4a":function(t,e,n){"use strict";n("0f9d")},"0f9d":function(t,e,n){},"1dff":function(t,e,n){"use strict";n("6d60")},"1f29":function(t,e,n){"use strict";n("5f24")},"232d":function(t,e,n){},"319d":function(t,e,n){},"33c1":function(t,e,n){},3450:function(t,e,n){"use strict";n("7f3f")},"3c85":function(t,e,n){},"3f42":function(t,e,n){},"41e8":function(t,e,n){"use strict";n("d745")},4841:function(t,e,n){},4855:function(t,e,n){},"4b58":function(t,e,n){"use strict";n("dd47")},"50fd":function(t,e,n){"use strict";n("82e3")},"51e9":function(t,e,n){},"5c0b":function(t,e,n){"use strict";n("9c0c")},"5f24":function(t,e,n){},"5fad":function(t,e,n){"use strict";n("72b3")},"62b7":function(t,e,n){},"6d60":function(t,e,n){},"72b3":function(t,e,n){},"7c86":function(t,e,n){"use strict";n("9b58")},"7f3f":function(t,e,n){},8262:function(t,e,n){"use strict";n("33c1")},"82e3":function(t,e,n){},"92ca":function(t,e,n){"use strict";n("3c85")},"992e":function(t,e,n){"use strict";n("3f42")},"996e":function(t,e,n){"use strict";n("4841")},"9b58":function(t,e,n){},"9c0c":function(t,e,n){},"9edb":function(t,e,n){"use strict";n("62b7")},a15b:function(t,e,n){},a5f5:function(t,e,n){},a650:function(t,e,n){},a946:function(t,e,n){"use strict";n("51e9")},b3a9:function(t,e,n){"use strict";n("a5f5")},c09d:function(t,e,n){"use strict";n("ef1e")},cd49:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("b0c0");var i=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-view")},c=[],o=(n("5c0b"),n("2877")),r={},s=Object(o["a"])(r,a,c,!1,null,null,null),u=s.exports,l=n("8c4f"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"div",staticClass:"moneyWrapper"},[n("Types",{attrs:{type:t.type,id:t.id},on:{"update:value":t.changeType}}),n("Tags",{attrs:{selectedTag:t.selectedTag},on:{"update:selectedTag":function(e){t.selectedTag=e},"update:selected-tag":function(e){t.selectedTag=e}}}),"icon"!==t.selectedTag.icon?n("NumberPad",{attrs:{"selected-tag":t.selectedTag,notes:t.notes,"create-at":t.createAt,amount:t.amount},on:{"update:selectedTag":function(e){t.selectedTag=e},"update:selected-tag":function(e){t.selectedTag=e},"update:notes":function(e){t.notes=e},"update:createAt":function(e){t.createAt=e},"update:create-at":function(e){t.createAt=e},"update:amount":function(e){t.amount=e},submit:t.saveRecord}}):t._e()],1)},f=[],p=n("d4ec"),h=n("bee2"),m=n("262e"),v=n("2caf"),g=(n("5319"),n("ac1f"),n("9ab4")),y=n("1b40"),b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"numberPadWrapper"},[n("label",{staticClass:"notes"},[n("span",{staticClass:"iconWrapper"},[n("Icon",{attrs:{name:"icon-notepad"}})],1),n("span",{staticClass:"name"},[t._v("备注:")]),n("input",{attrs:{type:"text",placeholder:"点击写备注..."},domProps:{value:t.notes},on:{input:t.onChange}}),n("span",{staticClass:"output"},[t._v(t._s(t.input))])]),n("div",{ref:"numberPad",staticClass:"numberPad",on:{click:t.onClickButton}},[n("button",[t._v("7")]),n("button",[t._v("8")]),n("button",[t._v("9")]),t.selectedDate===t.now?n("button",[n("Icon",{staticClass:"calendar",attrs:{name:"icon-rili"}}),n("span",[t._v("今天")])],1):n("button",{on:{click:t.openDate}},[t._v(" "+t._s(this.selectedDate.replace(/[-]/g,"/"))+" ")]),n("button",[t._v("4")]),n("button",[t._v("5")]),n("button",[t._v("6")]),n("button",[t._v("+")]),n("button",[t._v("1")]),n("button",[t._v("2")]),n("button",[t._v("3")]),n("button",[t._v("-")]),n("button",[t._v(".")]),n("button",[t._v("0")]),n("button",{staticClass:"remove"},[n("span",[t._v("删")]),n("Icon",{staticClass:"delete",attrs:{name:"icon-backspace"}}),n("span",[t._v("除")])],1),t.counting?n("button",{staticClass:"ok"},[t._v("=")]):n("button",{staticClass:"ok"},[t._v("完成")])]),n("yd-datetime",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"datetime",attrs:{slot:"right",type:"date","end-date":t.endDate},slot:"right",model:{value:t.selectedDate,callback:function(e){t.selectedDate=e},expression:"selectedDate"}})],1)},O=[];n("fb6a"),n("1276"),n("b680"),n("d3b7"),n("25f0");function _(t,e){var n,i=[],a=-10;while(null!==(n=t.exec(e)))i.push(n);return 0!==i.length&&(a=i[i.length-1].index),a}var j=_;n("466d");function k(t){var e=0,n=t.match(/[+-]*(\.\d+|\d+(\.\d+)?)/g)||[];while(n.length)e+=parseFloat(n.shift());return e.toString()}var L=k,T=n("5a0c"),x=n.n(T),C=n("8d82"),w=n.n(C);x.a.extend(w.a);var I=function(t){Object(m["a"])(n,t);var e=Object(v["a"])(n);function n(){var t;return Object(p["a"])(this,n),t=e.apply(this,arguments),t.counting=!1,t.input=t.amount,t.now=x()().format("YYYY-MM-DD"),t.selectedDate=t.createAt,t.endDate=x()().add(1,"year").dayOfYear(1).subtract(1,"day").format("YYYY-MM-DD"),t}return Object(h["a"])(n,[{key:"update",value:function(){this.$emit("update:createAt",this.selectedDate)}},{key:"onChange",value:function(t){var e=t.target;this.$emit("update:notes",e.value)}},{key:"openDate",value:function(){this.$refs.datetime.open()}},{key:"countingToggle",value:function(t){this.counting=t>0&&t<this.input.length-1}},{key:"onClickButton",value:function(t){var e,n=t.target;while(!n.matches("button")){if(n===this.$refs.numberPad){n=null;break}n=n.parentNode}n&&(e=n.textContent),e&&this.count(e)}},{key:"count",value:function(t){var e=[j(/[+-]/gi,this.input),j(/[.]/gi,this.input)];if("0123456789".indexOf(t)>=0){if(this.input.length>=10)return;if("0"===this.input)this.input=t;else{if("0"===t&&e[0]===this.input.length-2&&"0"===this.input.slice(-1))return;if(e[0]!==this.input.length-1&&e[1]===this.input.length-3)return;this.input+=t}}else if("."===t){if(this.input.length>=10)return;if(this.input.indexOf(t)>=0&&e[0]<0)return;var n=this.input.split(".").length-1;n<2&&(this.input+=t)}else if("+-".indexOf(t)>=0){if(e[0]>=0)return void(e[0]===this.input.length-1?this.input=this.input.slice(0,-1)+t:(this.input=this.cutAmount(L(this.input)),this.counting=!1,this.input+=t));this.input+=t}else if("="===t)this.input=this.cutAmount(L(this.input));else if("删除"===t)this.remove();else if("完成"===t)if(e[0]===this.input.length-1||"."===this.input.slice(-1))this.input=this.input.slice(0,-1);else{if("0"===this.input)return;this.$emit("submit",this.input)}else"今天"===t&&this.openDate();this.countingToggle(e[0]),this.$emit("update:amount",this.input)}},{key:"cutAmount",value:function(t){if(t.indexOf(".")>=0){var e=parseFloat(t).toFixed(2);return"0"===e.slice(-1)?e.slice(0,-1):e}return t.toString()}},{key:"remove",value:function(){1===this.input.length?this.input="0":this.input=this.input.slice(0,-1)}}]),n}(i["default"]);Object(g["a"])([Object(y["b"])(String)],I.prototype,"notes",void 0),Object(g["a"])([Object(y["b"])(String)],I.prototype,"createAt",void 0),Object(g["a"])([Object(y["b"])(String)],I.prototype,"amount",void 0),Object(g["a"])([Object(y["c"])("selectedDate")],I.prototype,"update",null),I=Object(g["a"])([y["a"]],I);var S=I,$=S,Y=(n("f7c8"),Object(o["a"])($,b,O,!1,null,"1d789429",null)),A=Y.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"types"},[n("li",{class:"-"===t.type&&"selected",on:{click:function(e){return t.selectType("-")}}},[t._v("支出")]),n("li",{class:"+"===t.type&&"selected",on:{click:function(e){return t.selectType("+")}}},[t._v("收入")]),n("span",{on:{click:t.back}},[t._v("取消")])])},D=[],R=(n("a9e3"),function(t){Object(m["a"])(n,t);var e=Object(v["a"])(n);function n(){return Object(p["a"])(this,n),e.apply(this,arguments)}return Object(h["a"])(n,[{key:"selectType",value:function(t){if("-"!==t&&"+"!==t)throw new Error("type is unknown");this.type!==t&&this.$emit("update:value",t)}},{key:"back",value:function(){0!==this.recordList.length?this.id<=this.recordList[this.recordList.length-1].id&&0!==this.id?this.$router.replace("/statistics/edit/".concat(this.id)):this.$router.back():this.$router.replace("/statistics")}},{key:"recordList",get:function(){return this.$store.state.recordList}}]),n}(i["default"]));Object(g["a"])([Object(y["b"])(String)],R.prototype,"type",void 0),Object(g["a"])([Object(y["b"])(Number)],R.prototype,"id",void 0),R=Object(g["a"])([y["a"]],R);var N=R,W=N,E=(n("992e"),Object(o["a"])(W,M,D,!1,null,"0aa50e23",null)),F=E.exports,z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tagsWrapper"},[n("ul",{staticClass:"tags"},[t._l(t.tagList,(function(e){return n("li",{key:e.name,on:{click:function(n){return t.setSelectedTag({icon:e.icon,name:e.name})}}},[n("div",{class:{selected:t.selectedTag.icon===e.icon}},[n("Icon",{attrs:{name:e.icon}})],1),n("span",[t._v(t._s(e.name))])])})),n("router-link",{attrs:{to:"/money/setTags"}},[n("div",[n("Icon",{attrs:{name:"icon-shezhi"}})],1),n("span",[t._v("设置")])])],2)])},J=[],q=n("2909"),P=(n("a434"),n("d81d"),n("2f62"));function B(){var t=JSON.parse(window.localStorage.getItem("id")||"0");return t+=1,window.localStorage.setItem("id",JSON.stringify(t)),t}var H=B;i["default"].use(P["a"]);var U=new P["a"].Store({state:{tags:[{title:"娱乐",icons:["icon-youlechang","icon-shejian","icon-BowlingSpare","icon-Skiing","icon-Trekking","icon-toukui","icon-shoubing","icon-pingpang","icon--puke","icon--chouma","icon-guanying","icon-xiangqi","icon-huabing","icon-youyong","icon-bangqiu","icon-yumaoqiu","icon-fanchuan","icon-lanqiukuang","icon-taiqiu"]},{title:"饮食",icons:["icon-mifan","icon-hanbao","icon-jiubei","icon-xuegao","icon-kafei","icon-huoguo","icon-dangao","icon-dangao1","icon-shaokao","icon-shuichanhaixian","icon-yinliao-naicha","icon-kaoji","icon-shousi","icon-noodle","icon-bingqilin","icon-pingguo","icon-xiangjiao","icon-pijiu","icon-jitui"]},{title:"医疗",icons:["icon-yisheng","icon-tingzhenqi","icon-yao","icon-CTjiancha","icon-zhuyuan","icon-yunfu","icon-huaban","icon-lunyi","icon-yachi","icon-diandi"]},{title:"学习",icons:["icon-gangqin","icon-xianweijing","icon-huihua","icon-shangke","icon-boshimao","icon-wenju","icon-jita","icon-shuji","icon-xuexiao","icon-jisuanqi"]},{title:"购物",icons:["icon-erji","icon-pidai","icon-gaogenxie","icon-shuihu","icon-zhiniaoku","icon-maozi","icon-xiangji","icon-lingdai","icon-qunzi","icon-penzai","icon-jiezhi","icon-computer","icon-shoubiao","icon-kuzi","icon-xiaodao","icon-neiyi","icon-xianglian","icon-xiezi","icon-ximiannai","icon-Bag","icon-yanjing","icon-gouwuche","icon-neiku","icon-xianhua","icon-huazhuangpin","icon-hudiejie"]},{title:"家居",icons:["icon-bingxiang","icon-shafa","icon-dengpao","icon-dianshi","icon-yundou","icon-pentou","icon-pentou","icon-kongtiao","icon-linyu","icon-xiyiji","icon-chuifengji","icon-chuang","icon-dianfei","icon-yigui","icon-weixiu","icon-cheliang"]},{title:"交通",icons:["icon-paoche1","icon-danche","icon-jiayou","icon-huoche","icon-gonglu","icon-xiaohuoche","icon-fangche","icon-feiji","icon-lunchuan","icon-taxi","icon-tingche","icon-diandong","icon-motuoche"]},{title:"收入",icons:["icon-panjue","icon-jijin","icon-qian","icon-guquan","icon-jiangli","icon-qianbao","icon-saoma","icon-cunqian","icon-hongbao","icon-shouru","icon-xianjin"]}],tagListOut:[[{icon:"icon-canyin",name:"餐饮"},{icon:"icon-gouwu",name:"购物"},{icon:"icon-riyong",name:"日用"},{icon:"icon-jiaotong",name:"交通"},{icon:"icon-shucai",name:"蔬菜"},{icon:"icon-shuiguo",name:"水果"},{icon:"icon-lingshi",name:"零食"},{icon:"icon-yundong",name:"运动"},{icon:"icon-fushi",name:"服饰"},{icon:"icon-zhufang",name:"住房"},{icon:"icon-jujia",name:"居家"},{icon:"icon-haizi",name:"孩子"},{icon:"icon-changbei",name:"长辈"},{icon:"icon-shejiao",name:"社交"},{icon:"icon-lvxing",name:"旅行"},{icon:"icon-yanjiu",name:"烟酒"},{icon:"icon-shuma",name:"数码"},{icon:"icon-qiche",name:"汽车"},{icon:"icon-33485",name:"医疗"},{icon:"icon-xuexi",name:"书籍"},{icon:"icon-maozi",name:"学习"},{icon:"icon-chongwu",name:"宠物"},{icon:"icon-liwu",name:"礼物"},{icon:"icon-juanzeng",name:"捐赠"},{icon:"icon-weixiu",name:"维修"},{icon:"icon-caipiao",name:"彩票"},{icon:"icon-jiaren",name:"亲友"},{icon:"icon-kuaidi",name:"快递"},{icon:"icon-lijin",name:"礼金"},{icon:"icon-bangong",name:"办公"},{icon:"icon-tongxun",name:"通讯"},{icon:"icon-meirong",name:"美容"},{icon:"icon-yule",name:"娱乐"}],[]],tagListIn:[[{icon:"icon-gongzi",name:"工资"},{icon:"icon-jianzhi",name:"兼职"},{icon:"icon-licai",name:"理财"},{icon:"icon-lijin",name:"礼金"},{icon:"icon-qitashouru",name:"其他"}],[]],type:"-",addType:"-",record:{id:0,tag:{icon:"icon",name:"name"},notes:"",type:"-",amount:"0",createAt:x()().format("YYYY-MM-DD")},recordList:[{}]},mutations:{setType:function(t,e){t.type=e},setAddType:function(t,e){t.addType=e},fetchTagList:function(t){var e=JSON.parse(window.localStorage.getItem("tagListOut")||"[]"),n=JSON.parse(window.localStorage.getItem("tagListIn")||"[]");t.tagListOut=0===e.length?t.tagListOut:e,t.tagListIn=0===n.length?t.tagListIn:n},saveTagList:function(t){window.localStorage.setItem("tagListOut",JSON.stringify(t.tagListOut)),window.localStorage.setItem("tagListIn",JSON.stringify(t.tagListIn))},deleteTagList:function(t,e){var n,i,a=e.type,c=e.index;"-"===a?!0===t.tagListOut[0][c].custom?t.tagListOut[0].splice(c,1):(n=t.tagListOut[1]).unshift.apply(n,Object(q["a"])(t.tagListOut[0].splice(c,1))):!0===t.tagListIn[0][c].custom?t.tagListIn[0].splice(c,1):(i=t.tagListIn[1]).unshift.apply(i,Object(q["a"])(t.tagListIn[0].splice(c,1)));U.commit("saveTagList")},addTagList:function(t,e){var n,i,a=e.type,c=e.index;"-"===a?(n=t.tagListOut[0]).push.apply(n,Object(q["a"])(t.tagListOut[1].splice(c,1))):(i=t.tagListIn[0]).push.apply(i,Object(q["a"])(t.tagListIn[1].splice(c,1))),U.commit("saveTagList")},addCustomTag:function(t,e){var n=e.icon,i=e.name,a=e.custom;"-"===t.addType?t.tagListOut[0].push({icon:n,name:i,custom:a}):t.tagListIn[0].push({icon:n,name:i,custom:a}),U.commit("saveTagList")},setRecord:function(t,e){var n=e.id,i=e.tag,a=e.notes,c=e.type,o=e.amount,r=e.createAt;t.record={id:n,tag:i,notes:a,type:c,amount:o,createAt:r}},resetRecord:function(t){t.record={id:0,tag:{icon:"icon",name:"name"},notes:"",type:"-",amount:"0",createAt:x()().format("YYYY-MM-DD")}},fetchRecordList:function(t){t.recordList=JSON.parse(window.localStorage.getItem("recordList")||"[]")},saveRecordList:function(t){window.localStorage.setItem("recordList",JSON.stringify(t.recordList))},saveRecord:function(t){var e=t.record.id,n=0!==t.recordList.length?t.recordList[t.recordList.length-1].id:H();if(e<=n&&0!==e){var i=t.recordList.map((function(t){return t.id})).indexOf(e);t.recordList.splice(i,1,t.record)}else 0===t.record.id&&(t.record.id=H()),t.recordList.push(t.record);""===t.record.notes&&(t.record.notes=t.record.tag.name),U.commit("saveRecordList"),U.commit("resetRecord")},deleteRecord:function(t,e){var n=t.recordList.map((function(t){return t.id})).indexOf(e);t.recordList.splice(n,1),U.commit("saveRecordList")}},actions:{},modules:{}}),G=U,K=function(t){Object(m["a"])(n,t);var e=Object(v["a"])(n);function n(){return Object(p["a"])(this,n),e.apply(this,arguments)}return Object(h["a"])(n,[{key:"setSelectedTag",value:function(t){var e=t.icon,n=t.name;this.$emit("update:selectedTag",{icon:e,name:n})}},{key:"created",value:function(){G.commit("fetchTagList")}},{key:"tagList",get:function(){return"-"===this.type?G.state.tagListOut[0]:G.state.tagListIn[0]}},{key:"type",get:function(){return G.state.type}}]),n}(i["default"]);Object(g["a"])([Object(y["b"])(Object)],K.prototype,"selectedTag",void 0),K=Object(g["a"])([y["a"]],K);var Q=K,V=Q,X=(n("fdd0"),Object(o["a"])(V,z,J,!1,null,"16ad4d5f",null)),Z=X.exports;function tt(t){var e=window.innerHeight;t.style.height=e+"px"}var et=tt,nt=function(t){Object(m["a"])(n,t);var e=Object(v["a"])(n);function n(){var t;return Object(p["a"])(this,n),t=e.apply(this,arguments),t.selectedTag=t.record.tag,t.notes=t.record.notes,t.amount=t.record.amount,t.createAt=t.record.createAt,t.id=t.record.id,t}return Object(h["a"])(n,[{key:"mounted",value:function(){var t=this;this.$store.commit("fetchRecordList"),et(this.$refs.div),window.onresize=function(){var e=document.body.clientWidth;if(e<500){var n=t.$refs.div;n.style.height=window.innerHeight+"px"}}}},{key:"saveRecord",value:function(){this.$store.commit("saveRecord"),this.$router.replace("/statistics")}},{key:"updated",value:function(){G.commit("setRecord",{id:this.record.id,tag:this.selectedTag,notes:this.notes,type:this.type,amount:this.amount,createAt:this.createAt})}},{key:"type",get:function(){return G.state.type}},{key:"record",get:function(){return G.state.record}},{key:"changeType",value:function(t){G.commit("setType",t),G.commit("setAddType",t),this.selectedTag={icon:"icon",name:"name"}}}]),n}(i["default"]);nt=Object(g["a"])([Object(y["a"])({components:{Tags:Z,Types:F,NumberPad:A}})],nt);var it=nt,at=it,ct=(n("b3a9"),Object(o["a"])(at,d,f,!1,null,"192334c0",null)),ot=ct.exports,rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Layout",[n("div",{staticClass:"chartWrapper"},[n("ChartHeader",{attrs:{type:t.type,time:t.time},on:{"update:type":function(e){t.type=e},"update:time":function(e){t.time=e}}}),n("div",{staticClass:"weekWrapper"},[n("div",{staticClass:"week"},[n("ol",{ref:"ol"},t._l(this.week,(function(e){return n("li",{key:e,ref:"lis",refInFor:!0,class:{selected:t.selectedLi===e},on:{click:function(n){return t.changeSelectedLi(e)}}},[t._v(" "+t._s(e)+" ")])})),0)])]),n("div",{staticClass:"title"},[n("span",[t._v("总支出："+t._s(t.moneyData.map((function(t){return t.total})).reduce((function(t,e){return t+e}))))]),n("span",[t._v("平均值："+t._s((t.moneyData.map((function(t){return t.total})).reduce((function(t,e){return t+e}))/t.moneyData.length).toFixed(2)))])]),n("Charts",{attrs:{options:t.chartOptions}}),n("div",{staticClass:"records"},[n("h3",[t._v("支出排行榜")]),0!==t.newList.length?n("ul",t._l(this.newList,(function(e,i){return n("li",{key:i},[n("div",{staticClass:"iconWrapper"},[n("Icon",{attrs:{name:e.tag}})],1),n("div",{staticClass:"detailWrapper"},[n("div",{staticClass:"detail"},[n("span",[t._v(t._s(e.note))]),n("span",[t._v(t._s(e.percent))]),n("span",[t._v(t._s(e.total))])]),n("div",{ref:"moneyLi",refInFor:!0,staticClass:"progressbar"})])])})),0):n("div",[n("NoList")],1)])],1)])},st=[],ut=(n("4de4"),n("99af"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"container"})}),lt=[],dt=n("313e"),ft=function(t){Object(m["a"])(n,t);var e=Object(v["a"])(n);function n(){return Object(p["a"])(this,n),e.apply(this,arguments)}return Object(h["a"])(n,[{key:"mounted",value:function(){var t=this.$refs.container;this.chart=dt["a"](t),this.options&&this.chart.setOption(this.options)}},{key:"onOptionsChange",value:function(t){this.chart&&this.chart.setOption(t)}}]),n}(i["default"]);Object(g["a"])([Object(y["b"])()],ft.prototype,"options",void 0),Object(g["a"])([Object(y["c"])("options")],ft.prototype,"onOptionsChange",null),ft=Object(g["a"])([y["a"]],ft);var pt=ft,ht=pt,mt=(n("996e"),Object(o["a"])(ht,ut,lt,!1,null,"061388fe",null)),vt=mt.exports,gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",[n("div",{staticClass:"switchType",on:{click:function(e){t.typeSet=!t.typeSet}}},[n("span",[t._v(t._s("-"===t.type?"支出":"收入"))]),n("Icon",{attrs:{name:"icon-xiala"}})],1),n("div",{staticClass:"date"},[n("button",{class:{selected:"周"===t.time},on:{click:function(e){return t.setTime("周")}}},[t._v("周")]),n("button",{class:{selected:"月"===t.time},on:{click:function(e){return t.setTime("月")}}},[t._v("月")]),n("button",{class:{selected:"年"===t.time},on:{click:function(e){return t.setTime("年")}}},[t._v("年")])]),t.typeSet?n("div",{staticClass:"typeSet"},[n("div",{staticClass:"typeWrapper"},[n("div",{staticClass:"out",on:{click:function(e){return t.setType("-")}}},[n("Icon",{attrs:{name:"icon-zhichu2"}}),n("span",[t._v("支出")]),"-"===t.type?n("Icon",{attrs:{name:"icon-dui"}}):t._e()],1),n("span"),n("div",{staticClass:"in",on:{click:function(e){return t.setType("+")}}},[n("Icon",{attrs:{name:"icon-zhichu2-copy"}}),n("span",[t._v("收入")]),"+"===t.type?n("Icon",{attrs:{name:"icon-dui"}}):t._e()],1)])]):t._e(),t.typeSet?n("Shade",{nativeOn:{click:function(e){t.typeSet=!1}}}):t._e()],1)},yt=[],bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"i-shade"})},Ot=[],_t=function(t){Object(m["a"])(n,t);var e=Object(v["a"])(n);function n(){return Object(p["a"])(this,n),e.apply(this,arguments)}return n}(i["default"]);_t=Object(g["a"])([y["a"]],_t);var jt=_t,kt=jt,Lt=(n("1f29"),Object(o["a"])(kt,bt,Ot,!1,null,null,null)),Tt=Lt.exports,xt=function(t){Object(m["a"])(n,t);var e=Object(v["a"])(n);function n(){var t;return Object(p["a"])(this,n),t=e.apply(this,arguments),t.typeSet=!1,t}return Object(h["a"])(n,[{key:"setTime",value:function(t){this.$emit("update:time",t)}},{key:"setType",value:function(t){var e=this;this.$emit("update:type",t),setTimeout((function(){e.typeSet=!1}),150)}}]),n}(i["default"]);Object(g["a"])([Object(y["b"])(String)],xt.prototype,"type",void 0),Object(g["a"])([Object(y["b"])(String)],xt.prototype,"time",void 0),xt=Object(g["a"])([Object(y["a"])({components:{Shade:Tt}})],xt);var Ct=xt,wt=Ct,It=(n("7c86"),Object(o["a"])(wt,gt,yt,!1,null,"044a3e6e",null)),St=It.exports,$t=n("2a04"),Yt=n.n($t),At=n("5e77"),Mt=n.n(At);function Dt(t,e,n,i){var a,c=JSON.parse(JSON.stringify(i)).filter((function(t){return x()(t.createAt).year()===e})).filter((function(t){return x()(t.createAt).isoWeek()===n}));a=e===x()().year()?x()("".concat(e)).week(n+1):x()("".concat(e)).week(n);while(0!==a.day())a=a.subtract(1,"day");for(var o=1;o<=7;o++){a=a.add(1,"day");for(var r=a.format("MM-DD"),s=0,u=0;u<c.length;u++)x()(c[u].createAt).isoWeekday()===o&&(s+=parseFloat(c[u].amount));t.push({total:s,time:r.toString()})}}x.a.extend(Yt.a),x.a.extend(Mt.a);var Rt=Dt;function Nt(t,e,n,i){for(var a=JSON.parse(JSON.stringify(i)).filter((function(t){return x()(t.createAt).month()===e})),c=1;c<=n;c++){for(var o=0,r=0;r<a.length;r++)x()(a[r].createAt).date()===c&&(o+=parseFloat(a[r].amount));t.push({total:o,time:c.toString()})}}var Wt=Nt;function Et(t,e,n){for(var i=n.filter((function(t){return x()(t.createAt).year()===e})),a=0;a<12;a++){for(var c=0,o=0;o<i.length;o++)x()(i[o].createAt).month()===a&&(c+=parseFloat(i[o].amount));t.push({total:c,time:(a+1).toString()})}}var Ft=Et,zt=n("5a5a"),Jt=n.n(zt),qt=n("04ee"),Pt=n.n(qt);n("13d5");function Bt(t){if(0===t.length)return[];for(var e=[{tag:t[0].tag.icon,note:t[0].tag.name,total:0,percent:"0%"}],n=1;n<t.length;n++)e.map((function(t){return t.tag})).indexOf(t[n].tag.icon)<0&&e.push({tag:t[n].tag.icon,note:t[n].tag.name,total:0,percent:"0%"});e.map((function(e){return e.total=t.filter((function(t){return t.tag.icon===e.tag})).reduce((function(t,e){return t+parseFloat(e.amount)}),0)})),e.sort((function(t,e){return e.total-t.total}));var i=e.reduce((function(t,e){return t+e.total}),0);return 0!==t.length&&e.map((function(t){return t.percent=(t.total/i*100).toFixed(2)+"%"})),e}var Ht=Bt,Ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"noList"},[n("icon",{attrs:{name:"icon-qingdan"}}),n("div"),n("span",[t._v("暂无数据")])],1)},Gt=[],Kt=function(t){Object(m["a"])(n,t);var e=Object(v["a"])(n);function n(){return Object(p["a"])(this,n),e.apply(this,arguments)}return n}(i["default"]);Kt=Object(g["a"])([y["a"]],Kt);var Qt=Kt,Vt=Qt,Xt=(n("f3dc"),Object(o["a"])(Vt,Ut,Gt,!1,null,"d85f9e76",null)),Zt=Xt.exports;x.a.extend(Pt.a),x.a.extend(Jt.a),x.a.extend(Mt.a),x.a.extend(Yt.a);var te=function(t){Object(m["a"])(n,t);var e=Object(v["a"])(n);function n(){var t;return Object(p["a"])(this,n),t=e.apply(this,arguments),t.type="-",t.time="周",t.selectedLi="本周",t}return Object(h["a"])(n,[{key:"updateSelectedLi",value:function(){"周"===this.time?this.selectedLi="本周":"月"===this.time?this.selectedLi="本月":"年"===this.time&&(this.selectedLi="今年")}},{key:"changeSelectedLi",value:function(t){this.selectedLi=t}},{key:"updated",value:function(){var t=this,e=this.$refs.moneyLi;if(e)for(var n=0;n<e.length;n++)e[n].style.width=this.newList[n].percent;var i=this.$refs.lis,a=i.filter((function(t){return"selected"===t.className}))[0],c=i.indexOf(a);this.$nextTick((function(){var e=t.$refs.ol,n=t.$refs.lis,i=document.body.clientWidth;if(t.week[t.week.length-1]!==t.selectedLi){var a=n.filter((function(t){return"selected"===t.className}))[0],o=n.indexOf(a)+1,r=a.getBoundingClientRect(),s=r.left,u=r.width,l=e.getBoundingClientRect(),d=l.left,f=i/2-u/2-s;n.length>=5&&(n.length-o<3?c<o&&(e.style.left="0px"):e.style.left=d+f+"px")}else{if(!n)return[];e.style.left="0px"}}))}},{key:"newList",get:function(){var t=this,e=JSON.parse(JSON.stringify(this.recordList)).filter((function(e){return e.type===t.type}));if(0===e.length)return[];if("周"===this.time){var n=x()().year();this.selectedLi.length>3&&(n=parseInt(this.selectedLi.slice(0,4)));var i=e.filter((function(t){return x()(t.createAt).year()===n})).filter((function(e){return t.moneyData.map((function(t){return t.time})).indexOf(x()(e.createAt).format("MM-DD"))>=0}));return Ht(i)}if("月"===this.time){var a=x()().year(),c=x()().month()+1;this.selectedLi.length>3?(a=parseInt(this.selectedLi.slice(0,4)),c=parseInt(this.selectedLi.slice(5,this.selectedLi.length))):"上月"===this.selectedLi?c=x()().subtract(1,"month").month()+1:parseInt(this.selectedLi.replace("月",""))<=12&&(c=parseInt(this.selectedLi.slice(0,this.selectedLi.length)));var o=e.filter((function(t){return x()(t.createAt).year()===a})).filter((function(t){return x()(t.createAt).format("YYYY-MM")===x()("".concat(a,"-").concat(c)).format("YYYY-MM")}));return Ht(o)}var r=x()().year();r="去年"===this.selectedLi?x()().subtract(1,"year").year():"今年"===this.selectedLi?x()().year():parseInt(this.selectedLi.slice(0,this.selectedLi.length));var s=e.filter((function(t){return x()(t.createAt).year()===r})).filter((function(t){return x()(t.createAt).format("YYYY")===r.toString()}));return Ht(s)}},{key:"chartOptions",get:function(){var t=this.moneyData.map((function(t){return t.time})),e=this.moneyData.map((function(t){return t.total})),n=JSON.parse(JSON.stringify(e)).sort((function(t,e){return e-t}))[0];return{title:{text:"最大值:".concat(n),right:5,top:-1,textStyle:{fontSize:12,fontWeight:300}},grid:{x:10,y:20,x2:10,y2:20},tooltip:{trigger:"axis"},xAxis:{type:"category",data:t,axisTick:{show:!1},axisLabel:{fontSize:10}},yAxis:{type:"value",max:"dataMax",splitNumber:1,interval:0===n?"0":n,axisLabel:{showMinLabel:!1,showMaxLabel:!1},splitLine:{lineStyle:{color:"rgb(136,136,136)"}}},series:[{data:e,type:"line",name:"金额",symbolSize:5,emphasis:{lineStyle:{width:.5}},lineStyle:{width:.5,color:"#000"},itemStyle:{color:"rgb(255,218,68)"},markLine:{silent:!0,symbol:"none",lineStyle:{width:1,color:"rgb(217,217,217)"},label:{show:!1},itemStyle:{color:"#000"},data:[{type:"average",name:"平均值"}]}}]}}},{key:"moneyData",get:function(){var t=this,e=this.selectedLi,n=[],i=JSON.parse(JSON.stringify(this.recordList)).filter((function(e){return e.type===t.type}));if("周"===this.time)if(e||(e="本周"),"本周"===e){var a=x()().year(),c=x()().isoWeek();Rt(n,a,c,i)}else if("上周"===e){var o=x()().year(),r=x()().isoWeek()-1;Rt(n,o,r,i)}else if(parseInt(e.replace("周",""))<=53){var s=x()().year(),u=parseInt(e.replace("周",""));Rt(n,s,u,i)}else{var l=parseInt(e.slice(0,4)),d=parseInt(e.slice(5,e.length-1)),f=i.filter((function(t){return x()(t.createAt).year()===l}));Rt(n,l,d,f)}else if("月"===this.time)if(e||(e="本月"),"本月"===e){var p=x()().month(),h=x()("".concat(x()().year(),"-").concat(p+1)).daysInMonth(),m=i.filter((function(t){return x()(t.createAt).year()===x()().year()}));Wt(n,p,h,m)}else if("上月"===e){var v=x()().month()-1,g=x()("".concat(x()().year(),"-").concat(v+1)).daysInMonth(),y=i.filter((function(t){return x()(t.createAt).year()===x()().year()}));Wt(n,v,g,y)}else if(parseInt(e.replace("月",""))<=12){var b=parseInt(e.replace("月",""))-1,O=x()("".concat(x()().year(),"-").concat(b+1)).daysInMonth(),_=i.filter((function(t){return x()(t.createAt).year()===x()().year()}));Wt(n,b,O,_)}else{var j=parseInt(e.slice(0,4)),k=parseInt(e.slice(5,e.length-1))-1,L=x()("".concat(j,"-").concat(k+1)).daysInMonth(),T=i.filter((function(t){return x()(t.createAt).year()===j}));Wt(n,k,L,T)}else if("年"===this.time)if(e||(e="今年"),"今年"===e){var C=x()().year();Ft(n,C,i)}else if("去年"===e){var w=x()().year()-1;Ft(n,w,i)}else{var I=parseInt(e.slice(0,4));Ft(n,I,i)}return n}},{key:"week",get:function(){var t=x()(),e=JSON.parse(JSON.stringify(this.recordList)).sort((function(t,e){return x()(e.createAt).valueOf()-x()(t.createAt).valueOf()})),n=x()().month(),i=x()().isoWeek();0!==e.length&&x()(e[0].createAt).isAfter(x()())&&(n=x()(e[0].createAt).month(),i=x()(e[0].createAt).isoWeek());for(var a=0!==e.length?x()(e[e.length-1].createAt).year():x()().year(),c=[],o=1;o<=i;o++)o===x()().isoWeek()?c.push("本周"):o===x()().isoWeek()-1?c.push("上周"):c.push(o+"周");for(var r=[],s=0;s<=n;s++)s===x()().month()?r.push("本月"):s===x()().month()-1?r.push("上月"):r.push(s+1+"月");for(var u=[],l=a;l<=t.year();l++)l===t.year()?u.push("今年"):l===t.year()-1?u.push("去年"):u.push(l+"年");for(var d=t.year()-1;d>=a;d--){for(var f=x()("2020").isoWeeksInYear();f>=1;f--)c.unshift(d+"-"+f+"周");for(var p=12;p>=1;p--)r.unshift(d+"-"+p+"月")}return"周"===this.time?c:"月"===this.time?r:u}},{key:"recordList",get:function(){return G.state.recordList}},{key:"mounted",value:function(){G.commit("fetchRecordList"),G.commit("resetRecord"),G.commit("setType","-")}}]),n}(i["default"]);Object(g["a"])([Object(y["c"])("time")],te.prototype,"updateSelectedLi",null),te=Object(g["a"])([Object(y["a"])({components:{NoList:Zt,ChartHeader:St,Charts:vt}})],te);var ee=te,ne=ee,ie=(n("4b58"),Object(o["a"])(ne,rt,st,!1,null,"5a0c4618",null)),ae=ie.exports,ce=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Layout",[n("div",{staticClass:"statisticsWrapper"},[n("StatisticsHeader",{attrs:{time:t.time,money:t.totalFunds},on:{"update:time":function(e){t.time=e}}}),n("main",[0!==t.groupList.length?n("ol",t._l(t.groupList,(function(e){return n("li",{key:e.title},[n("h3",{staticClass:"title"},[n("div",{staticClass:"payTime"},[n("span",[t._v(t._s(e.title.slice(5).replace("-","月").concat("日")))]),n("span",[t._v(t._s(e.day))])]),n("div",{staticClass:"total"},[0!==e.income?n("span",[t._v("收入:"+t._s(e.income))]):t._e(),0!==e.outlay?n("span",[t._v("支出:"+t._s(e.outlay))]):t._e()])]),n("ul",{staticClass:"recordWrapper"},t._l(e.items,(function(e,i){return n("router-link",{key:i,staticClass:"record",attrs:{to:"/statistics/edit/"+e.id}},[n("div",[n("Icon",{attrs:{name:e.tag.icon}})],1),n("span",[t._v(t._s(e.notes))]),n("span",[t._v(t._s("-"===e.type?"-".concat(e.amount):e.amount))])])})),1)])})),0):n("div",{staticClass:"noGroup"},[n("NoList")],1)])],1)])},oe=[],re=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",[n("div",{staticClass:"top"},[n("div",{staticClass:"time",on:{click:t.open}},[n("span",[t._v(t._s(t.time.format("YYYY"))+"年")]),n("div",[n("span",[t._v(t._s(t.time.format("MM")))]),n("span",[t._v("月")]),n("Icon",{attrs:{name:"icon-xiala"}}),n("span",[t._v("|")])],1)]),n("div",{staticClass:"income"},[n("span",[t._v("收入")]),n("span",[t._v(t._s(t.money[0].toFixed(2)))])]),n("div",{staticClass:"outlay"},[n("span",[t._v("支出")]),n("span",[t._v(t._s(t.money[1].toFixed(2)))])])]),n("ul",[n("router-link",{attrs:{to:"/bill"}},[n("Icon",{attrs:{name:"icon-zhangdan"}}),n("span",[t._v("账单")])],1),n("router-link",{attrs:{to:"/fitting"}},[n("Icon",{attrs:{name:"icon-ziyuan"}}),n("span",[t._v("预算")])],1),n("router-link",{attrs:{to:"/fitting"}},[n("Icon",{attrs:{name:"icon-_baoxianlipei"}}),n("span",[t._v("资产管家")])],1),n("router-link",{attrs:{to:"/fitting"}},[n("Icon",{attrs:{name:"icon--zhishichanquan"}}),n("span",[t._v("理财知识")])],1),n("router-link",{attrs:{to:"/fitting"}},[n("Icon",{attrs:{name:"icon-A"}}),n("span",[t._v("购物返现")])],1)],1),n("yd-datetime",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"datetime",attrs:{slot:"right","end-date":t.endDate,type:"month"},slot:"right",model:{value:t.datetime,callback:function(e){t.datetime=e},expression:"datetime"}})],1)},se=[],ue=function(t){Object(m["a"])(n,t);var e=Object(v["a"])(n);function n(){var t;return Object(p["a"])(this,n),t=e.apply(this,arguments),t.datetime=x()(t.time).format("YYYY-MM"),t.endDate=x()().add(1,"year").dayOfYear(1).subtract(1,"day").format("YYYY-MM"),t}return Object(h["a"])(n,[{key:"update",value:function(){this.$emit("update:time",x()(this.datetime))}},{key:"open",value:function(){this.$refs.datetime.open()}}]),n}(i["default"]);Object(g["a"])([Object(y["b"])(Object)],ue.prototype,"time",void 0),Object(g["a"])([Object(y["b"])(Array)],ue.prototype,"money",void 0),Object(g["a"])([Object(y["c"])("datetime")],ue.prototype,"update",null),ue=Object(g["a"])([y["a"]],ue);var le=ue,de=le,fe=(n("3450"),Object(o["a"])(de,re,se,!1,null,"4d65fd50",null)),pe=fe.exports,he=[{day:1,week:"星期一"},{day:2,week:"星期二"},{day:3,week:"星期三"},{day:4,week:"星期四"},{day:5,week:"星期五"},{day:6,week:"星期六"},{day:0,week:"星期天"}];function me(t){return he.filter((function(e){return e.day===t}))[0].week}var ve=me,ge=function(t){Object(m["a"])(n,t);var e=Object(v["a"])(n);function n(){var t;return Object(p["a"])(this,n),t=e.apply(this,arguments),t.time=x()(),t}return Object(h["a"])(n,[{key:"totalFunds",get:function(){return[this.groupList.map((function(t){return t.income})).reduce((function(t,e){return(t||0)+(e||0)}),0),this.groupList.map((function(t){return t.outlay})).reduce((function(t,e){return(t||0)+(e||0)}),0)]}},{key:"recordList",get:function(){return this.$store.state.recordList}},{key:"groupList",get:function(){var t=this,e=this.recordList;if(0===e.length)return[];var n=JSON.parse(JSON.stringify(e)).filter((function(e){return x()(e.createAt).format("YYYY-MM")===x()(t.time).format("YYYY-MM")})).sort((function(t,e){return x()(e.createAt).valueOf()-x()(t.createAt).valueOf()}));if(0===n.length)return[];for(var i=[{title:x()(n[0].createAt).format("YYYY-MM-DD"),day:ve(x()(n[0].createAt).day()),income:0,outlay:0,items:[n[0]]}],a=1;a<n.length;a++){var c=n[a],o=i[i.length-1];x()(o.title).isSame(x()(c.createAt),"day")?o.items.push(c):i.push({title:x()(c.createAt).format("YYYY-MM-DD"),day:ve(x()(c.createAt).day()),items:[c]})}return i.map((function(t){return t.outlay=t.items.filter((function(t){return"-"===t.type})).reduce((function(t,e){return t+parseFloat(e.amount)}),0)})),i.map((function(t){return t.income=t.items.filter((function(t){return"+"===t.type})).reduce((function(t,e){return t+parseFloat(e.amount)}),0)})),i}},{key:"beforeCreate",value:function(){G.commit("fetchRecordList")}},{key:"mounted",value:function(){G.commit("resetRecord"),G.commit("setType","-")}}]),n}(i["default"]);ge=Object(g["a"])([Object(y["a"])({components:{NoList:Zt,StatisticsHeader:pe}})],ge);var ye=ge,be=ye,Oe=(n("ec5c"),Object(o["a"])(be,ce,oe,!1,null,"156d80c9",null)),_e=Oe.exports,je=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",[t._v(" 对不起，你要找的页面不见了 ")]),n("router-link",{attrs:{to:"/"}},[t._v("返回首页")])],1)},ke=[],Le=function(t){Object(m["a"])(n,t);var e=Object(v["a"])(n);function n(){return Object(p["a"])(this,n),e.apply(this,arguments)}return n}(i["default"]);Le=Object(g["a"])([y["a"]],Le);var Te=Le,xe=Te,Ce=Object(o["a"])(xe,je,ke,!1,null,"01017c2c",null),we=Ce.exports,Ie=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"div",staticClass:"setTagsWrapper"},[n("SetTagsTop",{attrs:{type:t.addType},on:{"update:type":t.setAddType}}),n("main",[n("ul",t._l(t.tagList(),(function(e){return n("li",{key:e.name},[n("Icon",{attrs:{name:"icon-substract"},nativeOn:{click:function(n){return t.changeChoose(e.icon)}}}),n("div",[n("Icon",{attrs:{name:e.icon}})],1),n("span",[t._v(t._s(e.name))]),e.custom?n("span",{staticClass:"custom"},[t._v("自定义")]):t._e(),n("Icon",{attrs:{name:"icon-menu"}})],1)})),0),0!==t.deleteTagList().length?n("div",[t._v("更多类别")]):t._e(),n("ul",t._l(t.deleteTagList(),(function(e){return n("li",{key:e.name},[n("Icon",{attrs:{name:"icon-addTag"},nativeOn:{click:function(n){return t.addTag(e.icon)}}}),n("div",[n("Icon",{attrs:{name:e.icon}})],1),n("span",[t._v(t._s(e.name))]),n("Icon",{attrs:{name:"icon-menu"}})],1)})),0)]),n("SetTagsFooter"),t.choose?n("div",{staticClass:"shadeWrapper"},[n("AskDelete",{nativeOn:{click:function(e){t.choose=!1}}}),n("div",{staticClass:"content"},[t._m(0),n("div",{staticClass:"choose"},[n("button",{on:{click:function(e){t.choose=!1}}},[t._v("取消")]),n("button",{on:{click:t.deleteCurrentTag}},[t._v("确认")])])])],1):t._e()],1)},Se=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text"},[n("h3",[t._v("警告")]),n("span",[t._v("删除类别会同时删除该类别下的所有记账")])])}],$e=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",[n("router-link",{attrs:{to:"/money/setTags/customTag"}},[n("Icon",{attrs:{name:"icon-add"}}),n("span",[t._v("添加类别")])],1)],1)},Ye=[],Ae=function(t){Object(m["a"])(n,t);var e=Object(v["a"])(n);function n(){return Object(p["a"])(this,n),e.apply(this,arguments)}return n}(i["default"]);Ae=Object(g["a"])([y["a"]],Ae);var Me=Ae,De=Me,Re=(n("e717"),Object(o["a"])(De,$e,Ye,!1,null,"2c5e6f4d",null)),Ne=Re.exports,We=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",[n("Top",{attrs:{"top-name":"类别设置"}}),n("div",{staticClass:"change"},[n("div",{class:"-"===t.type&&"selected",on:{click:function(e){return t.selected("-")}}},[t._v("支出")]),n("div",{class:"+"===t.type&&"selected",on:{click:function(e){return t.selected("+")}}},[t._v("收入")])])],1)},Ee=[],Fe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"top"},[n("Icon",{attrs:{name:"icon-icon"},nativeOn:{click:function(e){return t.back(e)}}}),n("span",[t._v(t._s(t.topName))]),n("span",{staticClass:"right",on:{click:t.saveTag}},[t._v(t._s(t.name))])],1)},ze=[],Je=function(t){Object(m["a"])(n,t);var e=Object(v["a"])(n);function n(){return Object(p["a"])(this,n),e.apply(this,arguments)}return Object(h["a"])(n,[{key:"created",value:function(){G.commit("fetchTagList")}},{key:"saveTag",value:function(){var t=this;if(this.value){var e;e="-"===this.addType?this.tagListOut.map((function(e){return e.filter((function(e){return e.name===t.value}))})):this.tagListIn.map((function(e){return e.filter((function(e){return e.name===t.value}))}));var n=Object(q["a"])(e.map((function(t){return t.length}))).reduce((function(t,e){return t+e}));0===n?(G.commit("addCustomTag",{icon:this.selectedTag,name:this.value,custom:!0}),this.back()):window.alert("类别不能重复添加")}else window.alert("不能添加空格")}},{key:"tagListOut",get:function(){return G.state.tagListOut}},{key:"tagListIn",get:function(){return G.state.tagListIn}},{key:"addType",get:function(){return G.state.addType}},{key:"back",value:function(){this.$router.back()}}]),n}(i["default"]);Object(g["a"])([Object(y["b"])(String)],Je.prototype,"topName",void 0),Object(g["a"])([Object(y["b"])(String)],Je.prototype,"name",void 0),Object(g["a"])([Object(y["b"])(String)],Je.prototype,"value",void 0),Object(g["a"])([Object(y["b"])(String)],Je.prototype,"selectedTag",void 0),Je=Object(g["a"])([y["a"]],Je);var qe=Je,Pe=qe,Be=(n("5fad"),Object(o["a"])(Pe,Fe,ze,!1,null,"3514c18f",null)),He=Be.exports,Ue=function(t){Object(m["a"])(n,t);var e=Object(v["a"])(n);function n(){return Object(p["a"])(this,n),e.apply(this,arguments)}return Object(h["a"])(n,[{key:"selected",value:function(t){if("-"!==t&&"+"!==t)throw new Error("type is unknown");this.type!==t&&this.$emit("update:type",t)}}]),n}(i["default"]);Object(g["a"])([Object(y["b"])(String)],Ue.prototype,"type",void 0),Ue=Object(g["a"])([Object(y["a"])({components:{Top:He}})],Ue);var Ge=Ue,Ke=Ge,Qe=(n("8262"),Object(o["a"])(Ke,We,Ee,!1,null,"478385d9",null)),Ve=Qe.exports;function Xe(t,e){for(var n=-1,i=0;i<t.length;i++)t[i].icon===e&&(n=i);return n}var Ze=Xe,tn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"gray"})},en=[],nn=function(t){Object(m["a"])(n,t);var e=Object(v["a"])(n);function n(){return Object(p["a"])(this,n),e.apply(this,arguments)}return n}(i["default"]);nn=Object(g["a"])([y["a"]],nn);var an=nn,cn=an,on=(n("1dff"),Object(o["a"])(cn,tn,en,!1,null,"00667052",null)),rn=on.exports,sn=function(t){Object(m["a"])(n,t);var e=Object(v["a"])(n);function n(){var t;return Object(p["a"])(this,n),t=e.apply(this,arguments),t.selectedTag="icon",t.choose=!1,t}return Object(h["a"])(n,[{key:"changeChoose",value:function(t){var e=this;this.selectedTag=t,0!==this.recordList.length&&0!==this.recordList.map((function(t){return t.tag.icon})).filter((function(t){return t===e.selectedTag})).length?this.choose=!this.choose:this.deleteCurrentTag()}},{key:"deleteCurrentTag",value:function(){var t=this,e=this.recordList.map((function(t){return t})).filter((function(e){return e.tag.icon===t.selectedTag})).map((function(t){return t.id}));e.indexOf(this.record.id)>=0&&this.$store.commit("resetRecord"),0!==e.length&&e.map((function(e){return t.$store.commit("deleteRecord",e)}));var n="-"===this.addType?Ze(this.tagListOut[0],this.selectedTag):Ze(this.tagListIn[0],this.selectedTag);this.$store.commit("deleteTagList",{type:this.addType,index:n}),this.choose=!1}},{key:"setAddType",value:function(t){G.commit("setAddType",t)}},{key:"tagList",value:function(){return"-"===this.addType?this.tagListOut[0]:this.tagListIn[0]}},{key:"deleteTagList",value:function(){return"-"===this.addType?this.tagListOut[1]:this.tagListIn[1]}},{key:"addTag",value:function(t){var e="-"===this.addType?Ze(this.tagListOut[1],t):Ze(this.tagListIn[1],t);this.$store.commit("addTagList",{type:this.addType,index:e})}},{key:"created",value:function(){G.commit("fetchTagList"),G.commit("fetchRecordList")}},{key:"mounted",value:function(){et(this.$refs.div)}},{key:"addType",get:function(){return G.state.addType}},{key:"tagListIn",get:function(){return G.state.tagListIn}},{key:"tagListOut",get:function(){return G.state.tagListOut}},{key:"recordList",get:function(){return this.$store.state.recordList}},{key:"record",get:function(){return this.$store.state.record}}]),n}(i["default"]);sn=Object(g["a"])([Object(y["a"])({components:{AskDelete:rn,SetTagsTop:Ve,SetTagsFooter:Ne}})],sn);var un=sn,ln=un,dn=(n("ff74"),Object(o["a"])(ln,Ie,Se,!1,null,"aa42c466",null)),fn=dn.exports,pn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"div",staticClass:"addWrapper"},[n("div",{staticClass:"topWrapper"},[n("Top",{attrs:{"top-name":"-"===t.addType?"添加支出类别":"添加收入类别",name:"完成",value:t.input,"selected-tag":t.selectedTag}})],1),n("div",{staticClass:"selectedTag"},[n("div",{staticClass:"iconWrapper  selected"},[n("Icon",{attrs:{name:this.selectedTag}})],1),n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],attrs:{maxlength:"4",type:"text",placeholder:"输入类别名称（不超过四个汉字）"},domProps:{value:t.input},on:{input:function(e){e.target.composing||(t.input=e.target.value)}}})])]),n("div",{staticClass:"main"},t._l(t.tagList,(function(e,i){return n("div",{key:i,staticClass:"tagWrapper"},[n("span",[t._v(t._s(e.title))]),n("ul",t._l(e.icons,(function(e,i){return n("li",{key:i,on:{click:function(n){return t.selected(e)}}},[n("div",{staticClass:"iconWrapper",class:t.selectedTag===e&&"selected"},[n("Icon",{attrs:{name:e}})],1)])})),0)])})),0)])},hn=[],mn=function(t){Object(m["a"])(n,t);var e=Object(v["a"])(n);function n(){var t;return Object(p["a"])(this,n),t=e.apply(this,arguments),t.selectedTag="icon-youlechang",t.input="",t}return Object(h["a"])(n,[{key:"selected",value:function(t){this.selectedTag=t}},{key:"mounted",value:function(){et(this.$refs.div)}},{key:"addType",get:function(){return G.state.addType}},{key:"tagList",get:function(){return G.state.tags}}]),n}(i["default"]);mn=Object(g["a"])([Object(y["a"])({components:{Top:He}})],mn);var vn=mn,gn=vn,yn=(n("c09d"),Object(o["a"])(gn,pn,hn,!1,null,"231f20ae",null)),bn=yn.exports,On=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"div",staticClass:"wrapper"},[t.currentRecord?n("header",[n("div",{staticClass:"iconWrapper"},[n("div",{on:{click:t.back}},[n("Icon",{attrs:{name:"icon-icon"}})],1)]),n("div",{staticClass:"tagWrapper"},[n("div",[n("Icon",{attrs:{name:t.currentRecord.tag.icon}})],1),n("span",{staticClass:"category"},[t._v(t._s(t.currentRecord.tag.name))])]),n("span",[t._v("分享")])]):t._e(),t.currentRecord?n("main",[n("div",[n("span",[t._v("类型")]),n("span",[t._v(t._s("-"===t.currentRecord.type?"支出":"收入"))])]),n("div",[n("span",[t._v("金额")]),n("span",[t._v(t._s(t.currentRecord.amount))])]),n("div",[n("span",[t._v("日期")]),n("span",[t._v(t._s(t.recordTime.currentTime))]),n("span",[t._v(t._s(t.recordTime.week))])]),n("div",[n("span",[t._v("备注")]),n("span",[t._v(t._s(t.currentRecord.notes))])])]):t._e(),n("footer",[n("button",{on:{click:t.editCurrentRecord}},[t._v("编辑")]),n("button",{on:{click:t.changeChoose}},[t._v("删除")])]),t.choose?n("div",{staticClass:"shadeWrapper"},[n("AskDelete",{nativeOn:{click:function(e){return t.changeChoose(e)}}}),n("div",{staticClass:"content"},[t._m(0),n("div",{staticClass:"choose"},[n("button",{on:{click:t.changeChoose}},[t._v("取消")]),n("button",{on:{click:t.deleteCurrentRecord}},[t._v("删除")])])])],1):t._e()])},_n=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text"},[n("h3",[t._v("确认删除")]),n("span",[t._v("删除后数据不可恢复！")])])}];x.a.extend(Mt.a);var jn=function(t){Object(m["a"])(n,t);var e=Object(v["a"])(n);function n(){var t;return Object(p["a"])(this,n),t=e.apply(this,arguments),t.id=-1,t.choose=!1,t}return Object(h["a"])(n,[{key:"mounted",value:function(){et(this.$refs.div)}},{key:"changeChoose",value:function(){this.choose=!this.choose}},{key:"created",value:function(){this.id=parseInt(this.$route.params.id),this.$store.commit("fetchRecordList"),this.recordList.map((function(t){return t.id})).indexOf(this.id)<0&&this.$router.replace("/404"),this.$store.commit("resetRecord")}},{key:"deleteCurrentRecord",value:function(){this.$store.commit("deleteRecord",this.id),this.$router.back()}},{key:"editCurrentRecord",value:function(){this.$store.commit("setRecord",{id:this.currentRecord.id,tag:this.currentRecord.tag,notes:this.currentRecord.notes===this.currentRecord.tag.name?"":this.currentRecord.notes,type:this.currentRecord.type,amount:this.currentRecord.amount,createAt:this.currentRecord.createAt}),this.$store.commit("setType",this.currentRecord.type),this.$router.replace("/money")}},{key:"back",value:function(){this.$router.back()}},{key:"recordTime",get:function(){var t=x()(this.currentRecord.createAt),e=t.format("YYYY年MM月DD日"),n=ve(t.isoWeekday());return{currentTime:e,week:n}}},{key:"currentRecord",get:function(){var t=this;return this.recordList.filter((function(e){return e.id===t.id}))[0]}},{key:"recordList",get:function(){return this.$store.state.recordList}}]),n}(i["default"]);jn=Object(g["a"])([Object(y["a"])({components:{AskDelete:rn}})],jn);var kn=jn,Ln=kn,Tn=(n("9edb"),Object(o["a"])(Ln,On,_n,!1,null,"18c03f2c",null)),xn=Tn.exports,Cn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"div",staticClass:"contentWrapper"},[n("div",[n("div",[n("Icon",{attrs:{name:"icon-shigong"}})],1),n("div",[t._v("页面施工中")])]),n("router-link",{attrs:{to:"/statistics"}},[t._v("返回首页")])],1)},wn=[],In=function(t){Object(m["a"])(n,t);var e=Object(v["a"])(n);function n(){return Object(p["a"])(this,n),e.apply(this,arguments)}return Object(h["a"])(n,[{key:"mounted",value:function(){et(this.$refs.div)}}]),n}(i["default"]);In=Object(g["a"])([y["a"]],In);var Sn=In,$n=Sn,Yn=(n("92ca"),Object(o["a"])($n,Cn,wn,!1,null,"5adf07e0",null)),An=Yn.exports,Mn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"div",staticClass:"wrapper"},[n("header",[n("div",{staticClass:"top"},[n("div",{staticClass:"year",on:{click:t.open}},[n("span",[t._v(t._s(t.datetime.slice(0,4))+"年")]),n("Icon",{attrs:{name:"icon-xiala"}})],1),n("span",[t._v("账单")]),n("div",{staticClass:"back",on:{click:t.back}},[t._v("返回")])]),n("div",{staticClass:"surplus"},[n("span",[t._v("结余")]),n("div",[t._v(t._s(t.recordList.map((function(t){return t.surplus})).reduce((function(t,e){return t+e}),0).toFixed(2)))])]),n("div",{staticClass:"sortMoney"},[n("div",[n("span",[t._v("收入")]),n("span",[t._v(t._s(t.recordList.map((function(t){return t.income})).reduce((function(t,e){return t+e}),0).toFixed(2)))])]),n("div",[n("span",[t._v("支出")]),n("span",[t._v(t._s(t.recordList.map((function(t){return t.outlay})).reduce((function(t,e){return t+e}),0).toFixed(2)))])])])]),n("main",[0!==t.recordList.length?n("ol",[t._m(0),t._l(t.recordList,(function(e){return n("li",{key:e.month},[n("span",[t._v(t._s(e.month))]),n("span",[t._v(t._s(e.income))]),n("span",[t._v(t._s(e.outlay))]),n("span",[t._v(t._s(e.surplus))])])}))],2):n("NoList")],1),n("yd-datetime",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"datetime",attrs:{slot:"right",type:"month","end-date":t.endDate},slot:"right",model:{value:t.datetime,callback:function(e){t.datetime=e},expression:"datetime"}})],1)},Dn=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",[n("span",[t._v("月份")]),n("span",[t._v("收入")]),n("span",[t._v("支出")]),n("span",[t._v("结余")])])}],Rn=function(t){Object(m["a"])(n,t);var e=Object(v["a"])(n);function n(){var t;return Object(p["a"])(this,n),t=e.apply(this,arguments),t.datetime=x()().format("YYYY-MM"),t.endDate=x()().add(1,"year").dayOfYear(1).subtract(1,"day").format("YYYY-MM"),t}return Object(h["a"])(n,[{key:"open",value:function(){this.$refs.datetime.open()}},{key:"back",value:function(){this.$router.back()}},{key:"mounted",value:function(){et(this.$refs.div)}},{key:"created",value:function(){this.$store.commit("fetchRecordList")}},{key:"recordList",get:function(){var t=this.datetime.slice(0,4),e=this.$store.state.recordList.filter((function(e){return x()(e.createAt).format("YYYY")===t})).sort((function(t,e){return x()(e.createAt).valueOf()-x()(t.createAt).valueOf()}));if(0===e.length)return[];for(var n=[{month:x()(e[0].createAt).format("M月"),income:"+"===e[0].type?parseFloat(e[0].amount):0,outlay:"-"===e[0].type?parseFloat(e[0].amount):0,surplus:0}],i=function(i){var a=x()("".concat(t,"-").concat(i)).format("M"),c=n.map((function(t){return t.month.replace("月","")})).indexOf(a);c<0&&n.push({month:a+"月",income:0,outlay:0,surplus:0});for(var o=n.map((function(t){return t.month})).indexOf(a+"月"),r=e.slice(1).filter((function(t){return x()(t.createAt).format("M")===a})),s=0;s<r.length;s++)"-"===r[s].type?n[o].outlay+=parseFloat(r[s].amount):n[o].income+=parseFloat(r[s].amount)},a=parseInt(n[0].month.slice(0,2));a>0;a--)i(a);return n.map((function(t){return t.surplus=t.income-t.outlay})),n}}]),n}(i["default"]);Rn=Object(g["a"])([Object(y["a"])({components:{NoList:Zt}})],Rn);var Nn=Rn,Wn=Nn,En=(n("50fd"),Object(o["a"])(Wn,Mn,Dn,!1,null,"3cc184e7",null)),Fn=En.exports;i["default"].use(l["a"]);var zn=[{path:"/",redirect:"/statistics"},{path:"/money",component:ot},{path:"/money/setTags",component:fn},{path:"/money/setTags/customTag",component:bn},{path:"/chart",component:ae},{path:"/statistics",component:_e},{path:"/statistics/edit/:id",component:xn},{path:"/fitting",component:An},{path:"/bill",component:Fn},{path:"*",component:we}],Jn=new l["a"]({routes:zn}),qn=Jn,Pn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{staticClass:"icon"},[n("use",{attrs:{"xlink:href":"#"+t.name}})])},Bn=[],Hn=(n("159b"),n("ddb0"),function(t){return t.keys().forEach(t)});try{Hn(!function(){var t=new Error("Cannot find module 'undefined'");throw t.code="MODULE_NOT_FOUND",t}())}catch(di){console.log(di)}var Un={props:["name"],name:"Icon"},Gn=Un,Kn=(n("0c4a"),Object(o["a"])(Gn,Pn,Bn,!1,null,"29c00836",null)),Qn=Kn.exports,Vn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",[n("router-link",{staticClass:"item",attrs:{to:"/statistics","active-class":"selected"}},[n("Icon",{attrs:{name:"icon-mingxi"}}),t._v(" 明细 ")],1),n("router-link",{staticClass:"item",attrs:{to:"/money","active-class":"selected"}},[n("div",{staticClass:"addWrapper"},[n("div",{staticClass:"iconWrapper"},[n("Icon",{attrs:{name:"icon-add"}})],1)]),n("Icon"),t._v(" 记账 ")],1),n("router-link",{staticClass:"item",attrs:{to:"/chart","active-class":"selected"}},[n("Icon",{attrs:{name:"icon-tubiao3"}}),t._v(" 图表 ")],1)],1)},Xn=[],Zn={name:"Nav"},ti=Zn,ei=(n("41e8"),Object(o["a"])(ti,Vn,Xn,!1,null,"ad398fa8",null)),ni=ei.exports,ii=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"div",staticClass:"layoutWrapper"},[n("div",{staticClass:"content",class:t.classPrefix&&t.classPrefix+"-content"},[t._t("default")],2),n("Nav")],1)},ai=[],ci=function(t){Object(m["a"])(n,t);var e=Object(v["a"])(n);function n(){return Object(p["a"])(this,n),e.apply(this,arguments)}return Object(h["a"])(n,[{key:"mounted",value:function(){et(this.$refs.div)}}]),n}(i["default"]);Object(g["a"])([Object(y["b"])()],ci.prototype,"classPrefix",void 0),ci=Object(g["a"])([y["a"]],ci);var oi=ci,ri=oi,si=(n("a946"),Object(o["a"])(ri,ii,ai,!1,null,"8978af54",null)),ui=si.exports,li=(n("8e78"),n("6a82"));i["default"].component(li["DateTime"].name,li["DateTime"]),i["default"].config.productionTip=!1,i["default"].component("Icon",Qn),i["default"].component("Nav",ni),i["default"].component("Layout",ui),new i["default"]({router:qn,store:G,render:function(t){return t(u)}}).$mount("#app")},d745:function(t,e,n){},dd47:function(t,e,n){},e717:function(t,e,n){"use strict";n("232d")},ec5c:function(t,e,n){"use strict";n("a15b")},ef1e:function(t,e,n){},f3dc:function(t,e,n){"use strict";n("319d")},f7c8:function(t,e,n){"use strict";n("a650")},fdd0:function(t,e,n){"use strict";n("0140")},ff74:function(t,e,n){"use strict";n("4855")}});
//# sourceMappingURL=app.a228465f.js.map